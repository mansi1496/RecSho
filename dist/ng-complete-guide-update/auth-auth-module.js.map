{"version":3,"sources":["./src/app/auth/auth.component.ts","./src/app/auth/auth.component.html","./src/app/auth/auth.module.ts"],"names":[],"mappings":"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","file":"auth-auth-module.js","sourcesContent":["import {\n  Component,\n  ComponentFactoryResolver,\n  ViewChild,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\n\nimport { AuthService, AuthResponseData } from './auth.service';\nimport { AlertComponent } from '../shared/alert/alert.component';\nimport { PlaceholderDirective } from '../shared/placeholder/placeholder.directive';\nimport * as fromApp from '../store/app.reducer';\nimport * as AuthActions from './store/auth.actions'\nimport { Store } from '@ngrx/store';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.component.html'\n})\nexport class AuthComponent implements OnInit,OnDestroy {\n  isLoginMode = true;\n  isLoading = false;\n  error: string = null;\n  @ViewChild(PlaceholderDirective) alertHost: PlaceholderDirective;\n\n  private closeSub: Subscription;\n  private storeSub: Subscription;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private store : Store<fromApp.AppState>\n  ) {}\n\n  ngOnInit(){\n    this.storeSub = this.store.select('auth').subscribe(authState =>{\n      this.isLoading = authState.loading;\n      this.error = authState.authError;\n      if(this.error){\n        this.showErrorAlert(this.error);\n      }\n    })\n  }\n\n  onSwitchMode() {\n    this.isLoginMode = !this.isLoginMode;\n  }\n\n  onSubmit(form: NgForm) {\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n\n    // let authObs: Observable<AuthResponseData>;\n\n    // this.isLoading = true;\n\n    if (this.isLoginMode) {\n      // authObs = this.authService.login(email, password);\n      this.store.dispatch(new AuthActions.LoginStart({email : email, password : password}));\n    } else {\n      // authObs = this.authService.signup(email, password);\n      this.store.dispatch(new AuthActions.SignupStart({email: email, password : password}));\n    }\n\n   \n\n    // authObs.subscribe(\n    //   resData => {\n    //     console.log(resData);\n    //     this.isLoading = false;\n    //     this.router.navigate(['/recipes']);\n    //   },\n    //   errorMessage => {\n    //     console.log(errorMessage);\n    //     this.error = errorMessage;\n    //     this.showErrorAlert(errorMessage);\n    //     this.isLoading = false;\n    //   }\n    // );\n\n    form.reset();\n  }\n\n  onHandleError() {\n    // this.error = null;\n    this.store.dispatch(new AuthActions.ClearError());\n  }\n\n  ngOnDestroy() {\n    if (this.closeSub) {\n      this.closeSub.unsubscribe();\n    }\n    if(this.storeSub){\n      this.storeSub.unsubscribe();\n    }\n  }\n\n  private showErrorAlert(message: string) {\n    // const alertCmp = new AlertComponent();\n    const alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(\n      AlertComponent\n    );\n    const hostViewContainerRef = this.alertHost.viewContainerRef;\n    hostViewContainerRef.clear();\n\n    const componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\n\n    componentRef.instance.message = message;\n    this.closeSub = componentRef.instance.close.subscribe(() => {\n      this.closeSub.unsubscribe();\n      hostViewContainerRef.clear();\n    });\n  }\n}\n","<ng-template appPlaceholder></ng-template>\n<div class=\"row\">\n  <div class=\"col-xs-12 col-md-6 col-md-offset-3\">\n    <!-- <div class=\"alert alert-danger\" *ngIf=\"error\">\n      <p>{{ error }}</p>\n    </div> -->\n    <!-- <app-alert\n      [message]=\"error\"\n      *ngIf=\"error\"\n      (close)=\"onHandleError()\"\n    ></app-alert> -->\n    <div *ngIf=\"isLoading\" style=\"text-align: center;\">\n      <app-loading-spinner></app-loading-spinner>\n    </div>\n    <form #authForm=\"ngForm\" (ngSubmit)=\"onSubmit(authForm)\" *ngIf=\"!isLoading\">\n      <div class=\"form-group\">\n        <label for=\"email\">E-Mail</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          class=\"form-control\"\n          ngModel\n          name=\"email\"\n          required\n          email\n        />\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password</label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          class=\"form-control\"\n          ngModel\n          name=\"password\"\n          required\n          minlength=\"6\"\n        />\n      </div>\n      <div>\n        <button\n          class=\"btn btn-primary\"\n          type=\"submit\"\n          [disabled]=\"!authForm.valid\"\n        >\n          {{ isLoginMode ? 'Login' : 'Sign Up' }}\n        </button>\n        |\n        <button class=\"btn btn-primary\" (click)=\"onSwitchMode()\" type=\"button\">\n          Switch to {{ isLoginMode ? 'Sign Up' : 'Login' }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { AuthComponent } from './auth.component';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  declarations: [AuthComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild([{ path: '', component: AuthComponent }]),\n    SharedModule\n  ]\n})\nexport class AuthModule {}\n"],"sourceRoot":"webpack:///"}