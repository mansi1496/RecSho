{"version":3,"sources":["./src/app/auth/auth.component.ts","./src/app/auth/auth.component.html","./src/app/auth/auth.module.ts"],"names":[],"mappings":"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","file":"auth-auth-module.js","sourcesContent":["import {\n  Component,\n  ComponentFactoryResolver,\n  ViewChild,\n  OnDestroy\n} from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\n\nimport { AuthService, AuthResponseData } from './auth.service';\nimport { AlertComponent } from '../shared/alert/alert.component';\nimport { PlaceholderDirective } from '../shared/placeholder/placeholder.directive';\n\n@Component({\n  selector: 'app-auth',\n  templateUrl: './auth.component.html'\n})\nexport class AuthComponent implements OnDestroy {\n  isLoginMode = true;\n  isLoading = false;\n  error: string = null;\n  @ViewChild(PlaceholderDirective) alertHost: PlaceholderDirective;\n\n  private closeSub: Subscription;\n\n  constructor(\n    private authService: AuthService,\n    private router: Router,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) {}\n\n  onSwitchMode() {\n    this.isLoginMode = !this.isLoginMode;\n  }\n\n  onSubmit(form: NgForm) {\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n\n    let authObs: Observable<AuthResponseData>;\n\n    this.isLoading = true;\n\n    if (this.isLoginMode) {\n      authObs = this.authService.login(email, password);\n    } else {\n      authObs = this.authService.signup(email, password);\n    }\n\n    authObs.subscribe(\n      resData => {\n        console.log(resData);\n        this.isLoading = false;\n        this.router.navigate(['/recipes']);\n      },\n      errorMessage => {\n        console.log(errorMessage);\n        this.error = errorMessage;\n        this.showErrorAlert(errorMessage);\n        this.isLoading = false;\n      }\n    );\n\n    form.reset();\n  }\n\n  onHandleError() {\n    this.error = null;\n  }\n\n  ngOnDestroy() {\n    if (this.closeSub) {\n      this.closeSub.unsubscribe();\n    }\n  }\n\n  private showErrorAlert(message: string) {\n    // const alertCmp = new AlertComponent();\n    const alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(\n      AlertComponent\n    );\n    const hostViewContainerRef = this.alertHost.viewContainerRef;\n    hostViewContainerRef.clear();\n\n    const componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\n\n    componentRef.instance.message = message;\n    this.closeSub = componentRef.instance.close.subscribe(() => {\n      this.closeSub.unsubscribe();\n      hostViewContainerRef.clear();\n    });\n  }\n}\n","<ng-template appPlaceholder></ng-template>\n<div class=\"row\">\n  <div class=\"col-xs-12 col-md-6 col-md-offset-3\">\n    <!-- <div class=\"alert alert-danger\" *ngIf=\"error\">\n      <p>{{ error }}</p>\n    </div> -->\n    <!-- <app-alert\n      [message]=\"error\"\n      *ngIf=\"error\"\n      (close)=\"onHandleError()\"\n    ></app-alert> -->\n    <div *ngIf=\"isLoading\" style=\"text-align: center;\">\n      <app-loading-spinner></app-loading-spinner>\n    </div>\n    <form #authForm=\"ngForm\" (ngSubmit)=\"onSubmit(authForm)\" *ngIf=\"!isLoading\">\n      <div class=\"form-group\">\n        <label for=\"email\">E-Mail</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          class=\"form-control\"\n          ngModel\n          name=\"email\"\n          required\n          email\n        />\n      </div>\n      <div class=\"form-group\">\n        <label for=\"password\">Password</label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          class=\"form-control\"\n          ngModel\n          name=\"password\"\n          required\n          minlength=\"6\"\n        />\n      </div>\n      <div>\n        <button\n          class=\"btn btn-primary\"\n          type=\"submit\"\n          [disabled]=\"!authForm.valid\"\n        >\n          {{ isLoginMode ? 'Login' : 'Sign Up' }}\n        </button>\n        |\n        <button class=\"btn btn-primary\" (click)=\"onSwitchMode()\" type=\"button\">\n          Switch to {{ isLoginMode ? 'Sign Up' : 'Login' }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { AuthComponent } from './auth.component';\nimport { SharedModule } from '../shared/shared.module';\n\n@NgModule({\n  declarations: [AuthComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild([{ path: '', component: AuthComponent }]),\n    SharedModule\n  ]\n})\nexport class AuthModule {}\n"],"sourceRoot":"webpack:///"}